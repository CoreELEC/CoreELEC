From 9f53416e9461663c5decc72f251ef54ceadd7714 Mon Sep 17 00:00:00 2001
From: Adam Green <greena88@gmail.com>
Date: Wed, 9 May 2018 04:23:04 +0100
Subject: [PATCH] Fix banding issues

---
 xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp | 3 +++
 xbmc/windowing/amlogic/WinSystemAmlogic.cpp         | 2 ++
 2 files changed, 5 insertions(+)

diff --git a/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp b/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
index 582d25b..5f936a8 100644
--- a/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
+++ b/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
@@ -1899,6 +1899,10 @@ void CAMLCodec::Reset()
 
 bool CAMLCodec::AddData(uint8_t *pData, size_t iSize, double dts, double pts)
 {
+  // bandfix
+  SysfsUtils::SetString("/sys/class/amhdmitx/amhdmitx0/debug", "round1");
+  CLog::Log(LOGDEBUG, "bandfix AMLCodec.cpp");
+
   if (!m_opened || !pData)
     return false;
 
diff --git a/xbmc/windowing/amlogic/WinSystemAmlogic.cpp b/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
index 59d27f3..0907689 100644
--- a/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
+++ b/xbmc/windowing/amlogic/WinSystemAmlogic.cpp
@@ -75,6 +75,10 @@ CWinSystemAmlogic::CWinSystemAmlogic() :
   aml_permissions();
   aml_disable_freeScale();
 
+  // bandfix
+  SysfsUtils::SetString("/sys/class/amhdmitx/amhdmitx0/debug", "round1");
+  CLog::Log(LOGDEBUG, "bandfix WinSystemAmlogic.cpp");
+
   // Register sink
   AE::CAESinkFactory::ClearSinks();
   CAESinkALSA::Register();
-- 
2.7.4

